<!doctype HTML>
<html>
    <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
    <script src="https://rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>

    <body style='margin : 0px; overflow: hidden;'>
        <a-scene embedded arjs='sourceType: webcam;'>
            
            <a-assets>
                <img id="custom-image" src="https://your-image-url.com/image.png">
            </a-assets>

            <!-- Image flottante -->
            <a-entity id="floating-image"
                      geometry="primitive: plane; height: 1; width: 1"
                      material="src: #custom-image; transparent: true"
                      position="0 1 -2"
                      scale="1 1 1">
            </a-entity>

            <a-entity camera></a-entity>
        </a-scene>

        <script>
            let img = document.querySelector("#floating-image");
            let scaleFactor = 1;

            // Gestion du zoom avec la molette de la souris
            window.addEventListener("wheel", (event) => {
                if (event.deltaY > 0) {
                    scaleFactor -= 0.1; // DÃ©zoomer
                } else {
                    scaleFactor += 0.1; // Zoomer
                }
                scaleFactor = Math.max(0.5, Math.min(3, scaleFactor)); // Limite le zoom
                img.setAttribute("scale", `${scaleFactor} ${scaleFactor} ${scaleFactor}`);
            });

            // Gestion du zoom avec les doigts sur mobile
            let initialDistance = null;
            window.addEventListener("touchstart", (event) => {
                if (event.touches.length === 2) {
                    initialDistance = Math.hypot(
                        event.touches[0].pageX - event.touches[1].pageX,
                        event.touches[0].pageY - event.touches[1].pageY
                    );
                }
            });

            window.addEventListener("touchmove", (event) => {
                if (event.touches.length === 2 && initialDistance) {
                    let newDistance = Math.hypot(
                        event.touches[0].pageX - event.touches[1].pageX,
                        event.touches[0].pageY - event.touches[1].pageY
                    );

                    let zoomFactor = newDistance / initialDistance;
                    scaleFactor *= zoomFactor;
                    scaleFactor = Math.max(0.5, Math.min(3, scaleFactor));
                    img.setAttribute("scale", `${scaleFactor} ${scaleFactor} ${scaleFactor}`);

                    initialDistance = newDistance;
                }
            });
        </script>
    </body>
</html>
